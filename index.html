<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plateforme de datavisualisation — Accueil</title>
  <link rel="stylesheet" href="resource/styles.css" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
  <div class="page">
    <header class="siteHeader">
      <h1>DataViz Explorer</h1>

      <nav class="tabs" aria-label="Navigation">
        <a href="./viz1.html" class="tab">Viz 1</a>
        <a href="./index.html" class="tab is-active">Viz 2 — sélectionné</a>
        <a href="./viz3.html" class="tab">Viz 3</a>
        <a href="./quali.html" class="tab">Quali</a>
      </nav>
    </header>

    <section class="vizHeader">
      <h2>Visualisation 2 — Bulles & liens</h2>
      <button id="howtoBtn" class="howtoBtn" type="button">ⓘ Comment lire cette visualisation ?</button>
    </section>

    <p class="lead">
      Chaque bulle représente un laboratoire. Deux bulles sont reliées lorsqu’elles partagent au moins une valeur
      (ERC / HCERES / keywords selon le mode). Le seuil augmente le niveau de similarité requis.
    </p>

    <section class="layout">
      <!-- CONTROLS -->
      <aside class="controlsCard">
        <div class="field">
          <label for="linkMode">Source des liens</label>
          <select id="linkMode">
            <option value="erc" selected>valo:domaineErc</option>
            <option value="hceres">valo:domaineHceres</option>
            <option value="keywords">valo:keywords</option>
          </select>
        </div>

        <div class="field">
          <label for="minShared">Seuil lien (≥)</label>
          <select id="minShared">
            <option value="1" selected>1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        </div>

        <div class="field">
          <label for="charge">Densité</label>
          <select id="charge">
            <option value="-420">Plus compact</option>
            <option value="-320" selected>Équilibré</option>
            <option value="-240">Plus aéré</option>
          </select>
        </div>

        <div class="btnRow">
          <button class="btn" id="recenter">Recentrer</button>
          <button class="btn btnGhost" id="clearAll">Reset</button>
        </div>

        <!-- tes filtres (ERC/HCERES/keywords) peuvent rester ici, en dessous -->
        <div class="filters">
          <details open>
            <summary>Filtrer — ERC <span class="count" data-count-for="erc">0 sélection</span></summary>
            <div class="checklist" data-list="erc">
              <div class="search">
                <input type="text" placeholder="Rechercher un domaine ERC…" data-search="erc" />
              </div>
              <div class="items" data-items="erc"></div>
            </div>
          </details>

          <details>
            <summary>Filtrer — HCERES <span class="count" data-count-for="hceres">0 sélection</span></summary>
            <div class="checklist" data-list="hceres">
              <div class="search">
                <input type="text" placeholder="Rechercher un domaine HCERES…" data-search="hceres" />
              </div>
              <div class="items" data-items="hceres"></div>
            </div>
          </details>

          <details>
            <summary>Filtrer — Keywords <span class="count" data-count-for="keywords">0 sélection</span></summary>
            <div class="checklist" data-list="keywords">
              <div class="search">
                <input type="text" placeholder="Rechercher un mot-clé…" data-search="keywords" />
              </div>
              <div class="items" data-items="keywords"></div>
            </div>
          </details>
        </div>

        <div class="statsLine">
          <span>Labos: <b id="statNodes">0</b></span>
          <span>Liens: <b id="statLinks">0</b></span>
          <span>Mode: <b id="statMode">ERC</b></span>
        </div>
      </aside>

      <!-- VIZ -->
      <main class="vizCard" id="viz">
        <svg id="svg" aria-label="Réseau de laboratoires"></svg>
        <div class="tooltip" id="tooltip"></div>
      </main>
    </section>
  </div>

  <script type="module" src="resource/main.js"></script>
</body>
